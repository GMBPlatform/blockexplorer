"use strict";var socket=io("https://gmbplatform.io:21979");socket.on("message",function(t){var e=t.delimiter,a=t.count,o=t.info;switch(e){case"transaction":var n=o.reduce(function(t,e){return t+transactionTableRowGenerator(e.block_num,e.db_key,e.hash)},"");$("#total-transaction").text(a),$("#transaction-information__table > tbody:last").html(n);break;case"block":var c=o.reduce(function(t,e){return t+blockTableRowGenerator(e.block_num,e.block_gen_time,e.tx_count,e.hash)},"");$("#total-block").text(a),$("#block-information__table > tbody:last").html(c);break;case"node":var r=o.TIER[0].NN_LIST.reduce(function(t,e){return t+tableRowGenerator(e.P2P,e.SOCK.PROTO)},"");$("#node-information__table > tbody:last").html(r);break;case"chart":chartUpdate(t.timeList,t.tpsList,"tps__chart"),chartUpdate(t.dateList,t.amountList,"daily-transaction__chart")}});var tableRowGenerator=function(t,e,a,o){var n="padding:12px;",c="font-size:12px";return'\n  <tr style="font-family:Monospace, \'Consolas\'">\n  <td style="'.concat(n,'"><h5 style="').concat(c,'">').concat(t,'</h5></td>\n  <td style="').concat(n,'"><h5 style="').concat(c,'">').concat(e,"</h5></td>\n  ").concat(a&&'<td style="'.concat(n,'"><h5 style="').concat(c,'">').concat(a,"</h5></td>"),"\n  ").concat(o&&'<td style="'.concat(n,'"><h5 style="').concat(c,'">').concat(o,"</h5></td>"),"\n}\n  </tr>\n  ")},blockTableRowGenerator=function(t,e,a,o){var n="padding:12px;",c="font-size:12px;";return'\n  <tr style="font-family:Monospace, \'Consolas\'">\n  <td style="'.concat(n,'"><h5 style="').concat(c,'">').concat(t,'</h5></td>\n  <td style="').concat(n,'"><h5 style="').concat(c,'">').concat(e,'</h5></td>\n  <td style="').concat(n,'"><h5 style="').concat(c,'">').concat(a,'</h5></td>\n  <td style="').concat(n,'">\n    <a style="').concat(n+c+"color:#3498db","\" onmouseover=\"$(this).css('text-decoration', 'underline');\"\n     onmouseout=\"$(this).css('text-decoration', 'none');\"\n     href=\"https://gmbplatform.io/blockexplorer/search/block?key=").concat(o,'">\n     ').concat(o,"\n    </a>\n  </td>\n  </tr>\n  ")},transactionTableRowGenerator=function(t,e,a){var o="padding:12px;",n="font-size:12px;";return'\n  <tr style="font-family:Monospace, \'Consolas\'">\n  <td style="'.concat(o,'"><h5 style="').concat(n,'">').concat(t,'</h5></td>\n  <td style="').concat(o,'"><h5 style="').concat(n,'">').concat(e,'</h5></td>\n  <td style="').concat(o,'">\n  <a style="').concat(o+n+"color:#3498db","\" onmouseover=\"$(this).css('text-decoration', 'underline');\"\n   onmouseout=\"$(this).css('text-decoration', 'none');\"\n   href=\"https://gmbplatform.io/blockexplorer/search/transaction?key=").concat(a,'">\n   ').concat(a,"\n  </a>\n  </td>\n \n  </tr>\n  ")},chartUpdate=function(t,e,a){var o=$("#".concat(a));o.length&&echarts.init(o.get(0)).setOption({tooltip:{trigger:"axis"},title:null,legend:null,lineTension:0,grid:{top:10,right:50,left:50,bottom:40},xAxis:[{type:"category",boundaryGap:!1,data:[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9]],axisLine:{lineStyle:{color:"#e9ebee"}},axisTick:{show:!1},splitLine:{lineStyle:{color:"#e9ebee"}},axisLabel:{margin:20,fontFamily:"Open Sans",fontSize:12,color:"#939daa"}}],yAxis:[{type:"value",splitLine:{lineStyle:{color:"#e9ebee"}},axisLine:{lineStyle:{color:"#e9ebee"}},axisTick:{show:!1},max:Math.max.apply(null,e),min:0,axisLabel:{formatter:function(t){return 1e5<t?"".concat(numberWithCommas(Math.floor(t/1e3)),"k"):numberWithCommas(t)},fontFamily:"Open Sans",fontSize:12,color:"#939daa"}}],series:[{type:"line",data:[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]],showSymbol:!1,lineStyle:{normal:{color:"#eb5463"}},smooth:!0}]},!0)},initRequest=function(){$.ajax({type:"POST",url:"https://www.gmbplatform.io/blockexplorer/provider/init/dashboard",data:{delimiter:"dashboard"},success:function(t){$("#Text_LastPrice").text("$ "+parseFloat(t.marketcap.price_usd).toFixed(4)+" USD"),$("#Text_Change").text(t.marketcap.percent_change_24h+" % (24H)"),$("#Text_Volume24H").text(t.marketcap["24h_volume_usd"]+" GMB");var e=t.block.reduce(function(t,e){return t+blockTableRowGenerator(e.block_num,e.block_gen_time,e.tx_count,e.hash)},""),a=t.transaction.reduce(function(t,e){return t+transactionTableRowGenerator(e.block_num,e.db_key,e.hash)},"");$("#transaction-information__table > tbody:last").html(a),$("#block-information__table > tbody:last").html(e),$("#total-transaction").text(t.dashboard.total_tx_cnt),$("#total-block").text(t.dashboard.total_blk_cnt),$("#total-wallet").text(t.walletCount)}})},searchAlert=function(t){switch(t){case"length":$("#search-alert").text("Term is too short!");break;case"filter":$("#search-alert").text("You have to choose Transaction Hash or Block Hash or Wallet Address.");break;default:$("#search-alert").text("Unknown Error")}$("#search-alert").show(),setTimeout(function(){$("#search-alert").hide()},2e3)},searchOnSubmit=function(){var t=$.trim($("#searchDropDown").text()),e=$("#search-input").val();switch(t){case"Tx Hash":if(e.length<64){searchAlert("length");break}return $("#search-form").attr("action","https://gmbplatform.io/blockexplorer/search/transaction"),!0;case"Block Hash":if(e.length<64){searchAlert("length");break}return $("#search-form").attr("action","https://gmbplatform.io/blockexplorer/search/block"),!0;case"Wallet Addr":if(66===e.length)return $("#search-form").attr("action","https://gmbplatform.io/blockexplorer/search/wallet"),!0;searchAlert("length");break;default:searchAlert("filter")}return!1},searchDropDownMenuOnClick=function(){},searchDropDownItemOnClick=function(t){switch(t){case"block":$("#searchDropDown").text("Block Hash");break;case"transaction":$("#searchDropDown").text("Tx Hash");break;case"wallet":$("#searchDropDown").text("Wallet Addr")}},numberWithCommas=function(t){t=t.toString();for(var e=/(-?\d+)(\d{3})/;e.test(t);)t=t.replace(e,"$1,$2");return t},returnUTCTime=function(t){var e=new Date(Number(t)),a="".concat(e.getFullYear(),"-").concat(("00"+(e.getMonth()+1)).slice(-2),"-").concat(("00"+e.getDate()).slice(-2)),o="".concat(("00"+e.getHours()).slice(-2),":").concat(("00"+e.getMinutes()).slice(-2),":").concat(("00"+e.getSeconds()).slice(-2));return"".concat(a," ").concat(o)},init=function(){initRequest()};